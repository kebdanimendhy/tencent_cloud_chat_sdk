<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the setMessageExtensions method from the V2TIMMessageManager class, for the Dart programming language.">
  <title>setMessageExtensions method - V2TIMMessageManager class - v2_tim_message_manager library - Dart API</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="../../static-assets/github.css?v1">
  <link rel="stylesheet" href="../../static-assets/styles.css?v1">
  <link rel="icon" href="../../static-assets/favicon.png?v1">

  
</head>


<body data-base-href="../../" data-using-base-href="false" class="light-theme">

<div id="overlay-under-drawer"></div>

<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">tencent_cloud_chat_sdk</a></li>
    <li><a href="../../manager_v2_tim_message_manager/manager_v2_tim_message_manager-library.html">manager&#47;v2_tim_message_manager.dart</a></li>
    <li><a href="../../manager_v2_tim_message_manager/V2TIMMessageManager-class.html">V2TIMMessageManager</a></li>
    <li class="self-crumb">setMessageExtensions method</li>
  </ol>
  <div class="self-name">setMessageExtensions</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <div class="toggle" id="theme-button" title="Toggle brightness">
    <label for="theme">
      <input type="checkbox" id="theme" value="light-theme">
      <span id="dark-theme-button" class="material-symbols-outlined">
        dark_mode
      </span>
      <span id="light-theme-button" class="material-symbols-outlined">
        light_mode
      </span>
    </label>
  </div>
</header>
<main>

<div
    id="dartdoc-main-content"
    class="main-content"
    data-above-sidebar="manager_v2_tim_message_manager&#47;V2TIMMessageManager-class-sidebar.html"
    data-below-sidebar="">
    <div>
<h1><span class="kind-method">setMessageExtensions</span> method 
</h1></div>

    <section class="multi-line-signature">
      

<span class="returntype"><a href="https://api.flutter.dev/flutter/dart-async/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="../../models_v2_tim_value_callback/V2TimValueCallback-class.html">V2TimValueCallback</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.flutter.dev/flutter/dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="../../models_v2_tim_message_extension_result/V2TimMessageExtensionResult-class.html">V2TimMessageExtensionResult</a></span>&gt;</span></span>&gt;</span></span>&gt;</span></span>
<span class="name ">setMessageExtensions</span>(<wbr><ol class="parameter-list"><li><span class="parameter" id="setMessageExtensions-param-msgID">{<span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span> <span class="parameter-name">msgID</span>, </span></li>
<li><span class="parameter" id="setMessageExtensions-param-extensions"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="../../models_v2_tim_message_extension/V2TimMessageExtension-class.html">V2TimMessageExtension</a></span>&gt;</span></span> <span class="parameter-name">extensions</span>}</span></li>
</ol>)

      

    </section>
    
<section class="desc markdown">
  <p>设置消息扩展（Flutter SDK 4.2.0及以上版本支持，需要您购买旗舰版套餐）</p>
<p>参数
message	消息对象，消息需满足三个条件：1、消息发送前需设置 supportMessageExtension 为 true，2、消息必须是发送成功的状态，3、消息不能是社群（Community）和直播群（AVChatRoom）消息。
extensions	扩展信息，如果扩展 key 已经存在，则修改扩展的 value 信息，如果扩展 key 不存在，则新增扩展。
注意
扩展 key 最大支持 100 字节，扩展 value 最大支持 1KB，单次最大支持设置 20 个扩展，单条消息最多可设置 300 个扩展。
当多个用户同时设置同一个扩展 key 时，只有第一个用户可以执行成功，其它用户会收到 23001 错误码和更新后的拓展信息，在收到错误码和最新扩展信息后，请按需重新发起设置操作。
我们强烈建议不同的用户设置不同的扩展 key，这样大部分场景都不会冲突，比如投票、接龙、问卷调查，都可以把自己的 userID 作为扩展 key。</p>
</section>


    
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">Future&lt;V2TimValueCallback&lt;List&lt;V2TimMessageExtensionResult&gt;&gt;&gt;
    setMessageExtensions({
  required String msgID,
  required List&lt;V2TimMessageExtension&gt; extensions,
}) async {
  if (kIsWeb) {
    return await TencentCloudChatSdkPlatform.instance.setMessageExtensions(
      msgID: msgID,
      extensions: extensions,
    );
  }

  return await TIMMessageManager.instance.setMessageExtensions(
    msgID: msgID,
    extensions: extensions,
  );
}</code></pre>
</section>


  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="../../index.html">tencent_cloud_chat_sdk</a></li>
    <li><a href="../../manager_v2_tim_message_manager/manager_v2_tim_message_manager-library.html">v2_tim_message_manager</a></li>
    <li><a href="../../manager_v2_tim_message_manager/V2TIMMessageManager-class.html">V2TIMMessageManager</a></li>
    <li class="self-crumb">setMessageExtensions method</li>
</ol>


    <h5>V2TIMMessageManager class</h5>
    <div id="dartdoc-sidebar-left-content"></div>
  </div><!--/.sidebar-offcanvas-->

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
</div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    tencent_cloud_chat_sdk
      8.5.6864+4
  </span>

  
</footer>



<script src="../../static-assets/highlight.pack.js?v1"></script>
<script src="../../static-assets/docs.dart.js"></script>



</body>

</html>

